<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Pipe Antenna</title>
    <script>
        function uploadFile(fileInput) {
            alert("Starting file upload")

            const xhr = new XMLHttpRequest();
            xhr.open('POST', '/upload', true);
            xhr.setRequestHeader('Content-Type', "application/octet-stream");
            xhr.onload = function () {
                if (xhr.status === 200) {
                    alert("Done");
                } else {
                    alert("Error")
                }
            };

            xhr.send(fileInput.files[0]);
        }

        function downloadFileWithAuthKey(authKeyInput) {
            window.open("/download?auth_key=" + authKeyInput.value, "_blank")
        }
    </script>
    <style>
        button,
        input {
            font-size: 2.25rem;
            line-height: 2.5rem;
            padding: 1rem;
        }

        div {
            padding: 1rem;
        }
    </style>
</head>

<body>
    <div>
        <input type="file" id="fileInput" />

        <button onclick="uploadFile(document.getElementById('fileInput'))">
            Upload File
        </button>
    </div>
    <div>
        <input type="text" placeholder="Auth Key" id="authKeyInput" />

        <button onclick="downloadFileWithAuthKey(document.getElementById('authKeyInput'))">
            Download File
        </button>
    </div>
</body>

</html>